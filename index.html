<html>

<head>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, Helvetica, sans-serif
        }

        main {
            display: flex;
        }

        pre,

        textarea {
            font-family: Menlo, Consolas, Monaco, Liberation Mono, Lucida Console, monospace;
            margin: 0;
            padding: 0;
            flex: 1;
            background-color: #eee;
            width: 50vw;
            height: 97vh;
            overflow: scroll;
            border: 1px solid black;
            /* line-height: 1.1em; */
            white-space: pre;
            font-size: 0.9rem;
        }

        footer {
            height: 2vh;
            width: 100vw;
            text-align: center;
            padding-top: 1vh;
        }
    </style>
</head>

<body>
    <main>
        <textarea
            id="input">write or paste text with timestamps here!</textarea>
        <pre id="output" disabled>output will be converted here.</pre>
    </main>
    <footer>
        <a href="https://www.unixtime.app/">timestamp.app</a> - &copy; <a
            href="https://v01.io">Klaus Breyer</a>, <a
            href="https://github.com/klausbreyer/unixtime.app">Open Source</a>.
    </footer>
</body>
<script>

    function dateTimeString(n) {
        return new Date(n * 1).toLocaleDateString("en") + " " + new Date(n * 1).toLocaleTimeString("en")
    }
    const numberPattern = /\d+/g;
    const input = document.getElementById('input');
    const output = document.getElementById('output');
    if (input.addEventListener) {
        input.addEventListener('input', function () {
            const numbers = input.value.match(numberPattern);
            if (!numbers) {
                output.value = input.value;
                return;
            }

            const filtered = numbers.filter(n => n > Math.floor(new Date('2022').getTime()))

            let text = input.value;
            filtered.forEach(n => {
                text = text.replace(n, `<b>${dateTimeString(n)}</b>`)
            })
            output.innerHTML = text

        }, false);
    }

</script>

</html>
